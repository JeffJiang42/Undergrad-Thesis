\chapter{Dirac Operators on Manifolds}
%
\subsectionend $ $\\
%
\emph{Mathematics is a part of physics. Physics is an experimental science, a part of
natural science. Mathematics is the part of physics where experiments are cheap.} \\
%
\ib{-- ~ V.I. Arnold}
%
\subsectionend
%
\section{Connections}
%
We previously defined the Dirac operator $D$ on $\R^n$ and explored some
instances of $D$ in low dimensions. Somewhat surprisingly, the generalization
of the Dirac operator to the nonlinear world of manifolds provides an incredibly
general framework for first order differential operators on Riemannian manifolds.
The construction of $D$ on $\R^n$ implicitly used the
Riemannian geometry on $\R^n$, along with its associated Spin structure.
To explore the Dirac operator in more generality on manifolds, we need to
develop some of the geometry necessary in order to construct all of the necessary pieces
to discuss the Dirac operator.
%
\begin{defn}
Let $M$ be a smooth manifold. A \ib{distribution} on $X$ is a vector subbundle
$E \subset TX$.
\end{defn}
%
\begin{defn}
let $\pi : E \to M$ be a fiber bundle. The map $\pi$ determines a distinguished
subspace $\ker d\pi_e \subset T_eE$, called the \ib{vertical subspace}
which defines a distribution $V$ over $E$ called the \ib{vertical distribution}.
A \ib{connection} on $E$ is another distribution $H \subset TE$ such that
at every point $e \in E$, we have $V_e \oplus H_e = T_eE$. We also refer to the
distribution $H$ as a \ib{horizontal distribution}. In other words a connection
is a choice of splitting of the short exact sequence of vector bundles
\[\begin{tikzcd}
0 \ar[r] & V \ar[r] & TE \ar[r] & \pi^*TM \ar[r] & 0
\end{tikzcd}\]
If $E$ is a principal $G$-bundle, we ask for the horizontal distribution $H$
to be $G$-invariant, i.e. $H_{p \cdot g} = d(R_g)_p(H_p)$, where $R_g : E \to E$
denotes the right action of $g \in G$.
\end{defn}
%
Note that for a point $e \in E$, the projection map $d\pi_e$ restricted to
the horizontal subspace $H_e$ is a linear isomorphism $H_e \to T_{\pi(e)}X$.
%
\begin{defn}
Let $E \to M$ be a vector bundle. A \ib{$E$-valued $k$-form} is a section of
the vector bundle $\Lambda^kT^*M \otimes E \to M$. We denote the space of
$E$-valued $k$-forms by $\Omega_M^k(E)$. In the case that $E \to M$ is a
trivial bundle $E = M \times V$ for some vector space $V$, we abbreviate
this as a $V$-valued $k$ form, and the space of $V$-valued $k$-forms is denoted
$\Omega_M^k(V)$. In a local trivialization of $E$, an element
$\omega \in \Omega^k_M(E)$ can be thought of as a vector of $k$-forms.
\end{defn}
%
We are mostly concerned with connections on principal bundles, which have a
richer structure than connections on a general fiber bundle. Let $\pi : P \to M$
be a principal $G$-bundle, and let $\mathfrak{g}$ denote the Lie algebra of $G$.
Let $\exp : \g \to G$ denote the exponential map. Fix $x \in M$, a point
$p \in \pi\inv(x)$, and an element $X \in \g$. This determines a curve
$\gamma_X : I \to \pi\inv(x)$ with $\gamma_X(0) = p$ given by
\[
\gamma_X(t) = p \cdot \exp(tX)
\]
Since the action of $G$ preserves the fiber $\pi\inv(x)$, this curve lies
entirely in the fiber $\pi\inv(x)$, so the tangent vector $\dt{\gamma}_X$
at $t = 0$ is an element of the vertical space. In addition, since the
action of $G$ is free, the tangent vector $\dt{\gamma}_X = 0$ if and only if
$X = 0$, so the linear mapping $X \mapsto \dt{\gamma}_X$ is injective, and
consequently, an isomorphism $\g \to V_p$. Doing this over all points of the
fiber, given $X \in \g$, we get a vector field $\tilde{X}$
on the fiber $\pi\inv(x)$ by differentiating the right action of $\exp(tX)$.

Defining these vector fields fiberwise  then gives an isomorphism $
\underline{\g} \to V$, where $\underline{\g}$ denotes the trivial bundle
$P \times \g$. Under this isomorphism, the exact sequence of vector bundles becomes
\[\begin{tikzcd}
0 \ar[r] & \underline{\g} \ar[r] & TP \ar[r] & \pi^*TM \ar[r] & 0
\end{tikzcd}\]
One important thing to note is how these vector fields transform under the
right action of $G$.
%
\begin{prop}
Let $X \in \g$, and let $\tilde{X}$ be the vector field on $P$ induced by
$X$. Let $g \in G$, and let $R_g : P \to P$ denote the diffeomorphism given
by right multiplication by $g$. Then
\[
(R_g)_*(\tilde{X}) = \widetilde{\Ad_{g\inv} X}
\]
Where $\Ad_{g\inv} : \g \to \g$ is the linear map obtained by differentiating the
conjugation action $h \mapsto g\inv h g$ at the identity element of $G$.
\end{prop}
%
\begin{proof}
Let $p \in P$. By definition, we have that
\[
\tilde{X}_p = \frac{d}{dt}\bigg\vert_{t=0} p \cdot \exp(tX)
\]
Therefore, we have that
\begin{align*}
[(R_g)_*(\tilde{X})]_{p\cdot g} &=
d(R_g)_p\left( \frac{d}{dt}\bigg\vert_{t = 0} p\cdot \exp(tX) \right) \\
&= \frac{d}{dt}\bigg\vert_{t = 0} p \cdot \exp(tX)g \\
&= \frac{d}{dt}\bigg\vert_{t = 0}p \cdot g (g\inv \exp(tX)g) \\[5pt]
&= \left( \widetilde{\Ad_g\inv X} \right)_{p \cdot g}
\end{align*}
\end{proof}
%
Over a point $p \in P$, we have a direct sum decomposition $T_pP = V_p \oplus H_p$,
giving us a projection map $T_pP \to V_p$. Using the identification of $V_p$
with $\g$, this then determines a linear map $ \omega_p : T_pP \to \g$, where
$\ker\omega_p = H_p$. Doing this over all fibers $\pi\inv(p)$, this determines
a $\g$-valued $1$-form $\omega \in \Omega^1_P(\g)$ called the
\ib{connection $1$-form}. From the connection $1$-form $\omega$, we can recover
$H$ as the kernel of $\omega$. In addition, it is clear from the definition that
given $X \in \g$, we have $\omega_p(\tilde{X}_p) = X$. \\
%TODO Special case of vector bundles

In the case of a vector bundle $E \to M$, we can also construct a connection
$1$-form. Given any point $p \in E_x$, we get a linear isomorphism of the
fiber $E_x$ with the vertical space $V_p \subset T_pE$ via the mapping
\[
v \mapsto \frac{d}{dt}\bigg\vert_{t = 0} p + tv
\]
A horizontal distribution $H$ then gives us a projection map $T_pE \to V_p$
on each tangent space, and composing with the inverse isomorphism $V_p \to E_x$,
we get a linear map $\omega_p : T_pP \to E_x$. Doing this over all fibers gives
and $\pi^* E$ valued $1$-form $\omega \in \Omega^1_E(\pi^*E)$, which is
also called the connection $1$-form. As with principal bundles, the horizontal
distribution is recovered as the kernel of $\omega$.
%
\begin{prop}
Let $\pi : P \to M$ be a principal $G$-bundle and $\omega \in \Omega^1_P(\g)$ a
connection $1$-form on $P$. Then for $g \in G$, $R_g^*\omega = \Ad_{g\inv}\omega$.
where $R_g^*$ denotes pullback by the right action of $g$ on $P$.
\end{prop}
%
\begin{proof}
Fix $p \in P$, and let $v \in T_pP$. Since $T_pP = V_p \oplus H_p$, we have
that $v = \tilde{X}_p + h$ for $X \in \g$ and $h \in H_p$. We then compute
\begin{align*}
(R_g^*\omega)_p(v) &= (R_g^*\omega)_p(\tilde{X}_p + h) \\
&= \omega_{p \cdot g}((R_g)_*(\tilde{X}_p ) + (R_g)_*h)
\end{align*}
Then since $(R_g)_*\tilde{X} = \widetilde{\Ad_{g\inv}X}$ and
$(R_g)_*h \in H_{p \cdot g}$, we get that
\begin{align*}
\omega_{p \cdot g}((R_g)_*(\tilde{X}_p ) + (R_g)_*h) &=
\omega_{p \cdot g}((\widetilde{\Ad_{g\inv}X})_{p\cdot g} + 0 \\
&= \Ad_{g\inv} X \\
&= \Ad_{g\inv}\omega(\tilde{X}_p + h)
\end{align*}
\end{proof}
%
We mentioned before that principal $G$-bundles can be thought of as
generalizations of covering spaces, since for discrete $G$, a principal $G$-bundle
is a covering space. One notion we want to generalize is the notion of path
lifting. Given a covering space $\pi : P \to M$, a point $x \in M$, a point
$p \in \pi\inv(x)$ in the fiber, and a curve $\gamma : I \to M$ with
$\gamma(0) = x$, we use the fact that $p$ lies in a unique sheet
$U_\alpha \subset \pi\inv(U)$ for some evenly covered neighborhood $U$ of $x$
to lift $\gamma$ to a path $\tilde{\gamma} : I \to P$ starting at $p$. This relies
on the fact that $\pi$ restricted to $U_\alpha$ is a diffeomorphism onto $U$.
If $G$ is not discrete, we have no hope of this working without additional data
since $P$ has a larger dimension than $M$. The connection $H \subset TP$ is
exactly the data we need for path lifting. Using the same setup as above,
the curve $\gamma$ determines a vector field $V$ along its image given by
its velocity $V_{\gamma(t)} = \dt{\gamma}(t)$. Then since
$d\pi_p\vert_{H_p} : H_p \to T_{\pi(p)}M$ is an isomorphism, there exists
a unique horizontal vector $h_p \in T_pP$ at each point $p \in \pi\inv(\gamma(t))$
satisfying $d\pi_p(h_p) = V_{\gamma(t)}$, which determines a vector field along
the pullback bundle $\gamma^*TP$, which can naturally be thought of as a subset
of $TP$. Integrating these vector fields gives a flow along the pullback bundle,
and following the flow line starting at our favorite point in the fiber
$\pi\inv(x)$ gives us a path $\tilde{\gamma} : I \to P$ such that
$\pi \circ \tilde{\gamma} = \gamma$, i.e. a lift of $\gamma$. One important
thing to note is how path lifting interacts with the group action.
%
\begin{prop}
Let $\pi : P \to M$ be a principal $G$-bundle equipped with a connection
$H \subset TP$, and let $\gamma : I \to M$ be a path in $M$ with $\gamma(0) = x$.
Then let $\tilde{\gamma} : I \to P$ be the lift of $\gamma$ starting at $p$.
Then the lift of $\gamma$ starting at $p \cdot g$ is $\gamma \circ R_g$,
where $R_g$ is the right action of $g \in G$.
\end{prop}
%
\begin{proof}
Since the action of $R_g$ preserves the fibers of $\pi$,
$\tilde{\gamma} \circ R_g$ satisfies $\pi \circ \gamma \circ R_g = \gamma$.
By uniqueness of integral curves horizontal lift of the velocity vector field,
$\gamma \circ R_g$ must be the lift of $\gamma$ based at $p \cdot g$.
\end{proof}
%
Path lifting gives us a notion of \ib{parallel transport} -- an identification of
the fibers along a path on $M$.
%
\begin{defn}
Let $\pi : P \to M$ be a principal $G$-bundle with $H \subset TP$ a connection.
Let $\gamma : I \to M$ be a path starting at $x \in M$. Let
$\gamma_p : I \to P$ denote the lift of $\gamma$ starting at $p \in \pi\inv(x)$.
Define the \ib{parallel transport} maps $\tau_t : P_x \to P_{\gamma(t)}$ by
$\tau_t(p) = \gamma_p(t)$
\end{defn}
%
We note that the maps $\tau_t$ are isomorphisms, since the inverse map is given
by parallel transport along the curve $\overline{\gamma}(t) = \gamma(1-t)$.
The parallel transport maps justify the naming of a connection -- a connection
provides the necessary data to connect nearby fibers along a curve $\gamma$.
This notion of path lifting carries over to any associated bundle $P \times_G F$,
which is one way to see that the connection on $P$ induces a connection on
every associated bundle. As before, let $\gamma : I \to M$ be a path
with $\gamma(0) = x$, and let $[p,f] \in P \times_G F$ in the fiber over $x$,
i.e. $p \in \pi\inv(x)$. Let $\tilde{\gamma} : I \to P$ denote the lift
of $\gamma$ to $P$ starting at $p$. Then define
$\widehat{\gamma} : I \to P \times_G F$ by
$\widehat{\gamma}(t) = [\tilde{\gamma}(t), f]$, which is visibly a lift of
$\gamma$ to $P \times_G F$ starting at $[p,f]$. However, we should check that
this is independent of our choice of representative $[p,f]$. Let
$[p\cdot g, g\inv \cdot f]$ be another representative of the point $[p,f]$.
Then the lift of $\gamma$ to $P$ starting at $p \cdot g$ is the curve
$\tilde{\gamma} \cdot g$, so using this representative, we would define
$\widehat{\gamma}(t) = [\tilde{\gamma} \cdot g, g\inv \cdot f] =
[\tilde{\gamma}(t), f]$, so this definition does not rely on our choice of
representative. Another way to see how the connection on $P$ induces a
connection on the associated bundle $P \times_G F$ is by looking at the
horizontal distribution $H \subset TP$. This includes into the tangent bundle
$T(P \times F)$ as the subbundle $H \times \set{0}$, where $0$ denotes the
zero section of $TF$. The $G$-invariance of $H$ then guarantees that $H$
descends to to quotient $P \times F / G = P \times_G F$, giving a connection on
$P \times_G F$. \\
%

This induced connection has a very nice interpretation when we have an associated
vector bundle. Let $\rho : G \to GL(W)$ be a linear representation. Then let
$E = P \times_G W$ denote the associated vector bundle induced by $\rho$.
Recall from before that there is a bijective correspondence
\[
\Gamma_M(E) \longleftrightarrow
\set{\alpha : P \to W ~:~ \alpha(p \cdot g) = \rho(g)\inv \cdot \alpha(p)}
\]
We now generalize the correspondence $\Gamma_M(E)$ with $G$-equivariant maps
$P \to W$. Thinking of functions $P \to W$ as $0$-forms on $P$ valued in $W$ and
sections of $E$ as $0$-forms on $M$ valued in $E$, we can write this
correspondence more suggestively as
\[
\Omega_M^0(E) \longleftrightarrow
\set{\alpha \in \Omega_P^0(W) ~:~ R_g^*\psi = \rho(g)\inv\alpha} \subset \Omega_P^0(W)
\]
Where $R_g^*$ denotes the pullback of $\alpha$ along right multiplication by
$g \in G$. This notation suggests that this correspondence should generalize
to arbitrary $k$-forms.
%
\begin{prop}
There is a bijective correspondence
\[
\Omega_M^k(E) \longleftrightarrow
\set{\alpha \in \Omega_P^k(W) ~:~ R_g^*\alpha = \rho(g)\inv\alpha ~~\forall g \in G,~
\iota_{\widehat{\xi}}(\alpha) = 0 ~~\forall \xi \in \g} \subset \Omega_P^k(W)
\]
Where $\iota_{\widehat{\xi}}(\alpha)$  denotes the interior multiplication
of $\alpha$ with the vector field $\widehat{\xi}$ on $P$ induced by $\xi$, i.e.
\[
\iota_{\widehat{\xi}}(\alpha)(V_1, \ldots, V_{k-1}) =
\alpha(\widehat{\xi}, V_1, \ldots, V_{k-1})
\]
for vector fields $V_1, \ldots , V_{k-1}$. For convenience, we denote this
subset of $k$-forms on $P$ by $\Omega^{k,G}_P(W)$, where the superscript $G$
reminds us that these $k$-forms are $G$-invariant in the appropriate sense.
\end{prop}
%
\begin{rem*}
Note that the condition $\iota_{\widehat{\xi}}(\alpha)$ hold vacuously when
$\alpha$ is a $0$-form, so this agrees with our earlier correspondence.
\end{rem*}
%
\begin{proof}
We provide maps in both directions. Let $\omega \in \omega_M^k(E)$. We want to define
$\widetilde{\omega} \in \Omega_P^{k,G}(W)$. Using $\pi$, we pullback
$\omega$ to obtain a $k$-form $\pi^*\omega \in \Omega_P^k(E)$, and define
$\tilde{\omega}$ as follows. Given a point $p \in P$ and $v \in T_pP$,
$(\pi^*\omega)_p(v) = [p, a]$, where $[p,a]$ is the unique representative in
it's class with $p$ in the first component. We then define
$\tilde{\omega}_p(v) = a$. We then must check that
$\tilde{\omega} \in \Omega^{k,G}_P(W)$, so we must check
\begin{enumerate}
  \item $\iota_{\xi}(\tilde{\omega}) = 0$ for any vertical vector field $\xi$.
  \item $R_g^*\tilde{\omega} = \rho(g)\inv\tilde{\omega}$.
\end{enumerate}
For the first condition, Let $\xi \in V$ be a vertical vector field. Then we know that
$\iota_{\xi}(\pi^*\omega)= 0$, since $d\pi_p(\xi_p) = 0$ by the definition of the
vertical space. Therefore, $\iota_{\xi}(\tilde{\omega}) = 0$, verifying the
first condition. For the second condition, it suffices to check the action of
$\tilde{\omega}$ on vertical and horizontal vectors, since we have the direct
sum decomposition $T_pP = V_p \oplus H_p$. We the only need to check the action
of $\tilde{\omega}$ on horizontal vectors, since $\iota_\xi({\tilde{\omega}}) = 0$
for any vertical vector field $\xi$ and the vertical distribution is invariant
under the action of $G$. We first prove a lemma
%
\begin{lem*}
Let $v \in H_p$ be a horizontal vector. Then
$d\pi_p(v) = d\pi_{p \cdot g}((R_g)_*v)$
\end{lem*}
%
\begin{proof}
Let $\gamma : I \to M$ be a curve with $\gamma(0) = \pi(p)$ and velocity vector
$\gamma'(0) = d\pi_p(v)$. Then let $\tilde{\gamma} : I \to P$ be the lift of
$\gamma$ starting at $p$. From before, we know that $R_g \circ \tilde{\gamma}$
is the unique lift of $\gamma$ starting at $p \cdot g$, and by the chain rule,
the velocity vector of the curve $R_g \circ \tilde{\gamma}$ at $0$ is the vector
$(R_g)_*\tilde{\gamma}'(0) = (R_g)_*v$. Therefore, $(R_g)_*v$ is the unique
horizontal lift of $d\pi_p(v)$ based at $p \cdot g$, so
$d\pi_{p \cdot g}((R_g)_*v) = d\pi_p(v)$.
\end{proof}
%
Let $v_1, \ldots v_k \in H_p$ be horizontal vectors and $g \in G$. Then
\[
(R_g^*\tilde{\omega})_p(v_1,\ldots v_k) =
\tilde{\omega}_{p \cdot g}((R_g)_*v_1, \ldots , (R_g)_* v_k)
\]
Then if $\tilde{\omega}_p(v_1, \ldots v_k) = a$, by definition this means that
$(\pi^*\omega)_p(v_1, \ldots v_k) = [p,a]$. We also have that
$(\pi^*\omega)_{p\cdot g}((R_g)_*v_1,\ldots (R_g)_*v_k) = [p,a]$, since
$\pi(p \cdot g) = \pi(p)$ and that $d\pi_p(v_i) = d\pi_{p \cdot g}(v_i)$.
We know that $[p,a] = [p \cdot g, \rho(g)\inv a]$, so we conclude that
$R_g^*\tilde{\omega} = \rho(g)\inv\tilde{\omega}$.\\

In the other direction, let $\alpha \in \Omega^{k,G}_P(W)$. We wish to define
$\alpha' \in \Omega_M^k(E)$. Let $x \in M$ and $v_1, \ldots v_k \in T_xM$. Then
define
\[
\alpha'_x(v_1, \ldots, v_k) = [p,\alpha_{p}(\tilde{v}_1, \ldots, \tilde{v}_k)]
\]
where $p \in \pi\inv(x)$ and the $\tilde{v}_i$ are the unique horizontal lifts
of the $v_i$ at $p$. We first check that this definition is independent
of out choice of $p \in \pi\inv(x)$. We know $\alpha$ satisfies
$R_g^*\alpha = \rho(g)\inv\alpha$. Therefore, if we choose a different preimage
$p \cdot g \in \pi\inv(x)$, we would define $\alpha'$ by
\begin{align*}
\alpha'_x(v_1, \ldots, v_k) &=
[p \cdot g, (R_g^*\alpha)_{p}(\tilde{v}_1, \ldots, \tilde{v}_k) \\
&= [p \cdot g, \rho(g)\alpha_p(\tilde{v}_1, \ldots \tilde{v}_k)] \\
&= [p,\alpha_p(\tilde{v}_1, \ldots, \tilde{v}_k)]
\end{align*}
So this definition is independent of our choice of $p \in \pi\inv(x)$. It
is then easily verified that the maps are inverses to each other.
\end{proof}
%
This is an example of a relatively general phenomenon, in which appropriately
$G$-invariant objects on the total space $P$ descend to objects on the base space
$M$. \\

The correspondence $\Omega^k_M(E) \leftrightarrow \Omega^{k,G}_P(W)$ gives
us a natural way of discussing and extending covariant differentiation, which
gives us a way of taking directional derivatives on $E$ with respect to tangent
vectors on the base $M$.
\begin{defn}
Let $\pi : P \to M$ be a principal $G$-bundle with connection $1$-form
$\Theta \in \Omega_P^1(\g)$. Let $\rho : G \to GL(W)$ be a linear representation,
and let $\dt{\rho} : \g \to \End V$ denote the induced Lie algebra map. The
\ib{exterior covariant derivative} is a family of maps
$d_\Theta : \Omega_P^k(W) \to \Omega_P^{k+1}(W)$ given by
\[
d_\Theta \psi = d\psi + \dt{\rho}(\Theta) \wedge \psi
\]
By $\dt{\rho}(\Theta)$, we mean that its action on a vector field $V$ is
\[
\dt{\rho}(\Theta)(V) = \dt{\rho}(\Theta(V))
\]
which makes sense since $\Theta_p(V_p)$ is an element of $\g$. Then
to define $\dt{\rho}(\Theta) \wedge \psi$, we interpret $\dt{\rho}(\Theta)$
as a matrix $\dt{\rho}(\Theta)^i_j$ of $1$-forms and $\psi$ as a vector
$\psi^i$ of $k$-forms and define the wedge product as the usual matrix product
\[
(\dt{\rho}(\Theta) \wedge \psi)_i = \dt{\rho}(\Theta)^i_j \wedge \psi^j
\]
\end{defn}
%
We are especially interested in the restriction of the $d_\Theta$
to the subspace $\Omega_P^{k,G}(V) \cong \Omega_M^k(E)$, where $E$ denotes
the associated vector bundle $P \times_G V$. The first thing to check
is that given an element $\psi \in \Omega_P^{k,G}(W)$, its image
$d_\Theta\psi$ is an element of $\Omega_P^{k+1,G}(W)$.
%
\begin{prop}
Given $\psi \in \Omega_P^{k,G}(W)$, $d_\Theta\psi \in \Omega_P^{k+1,G}(W)$.
\end{prop}
%
\begin{proof} %TODO Finish and check this :(
We need to check two things:
\begin{enumerate}
  \item $\iota_{\xi}(d_\Theta\psi) = 0$ for any vertical vector field $\xi$.
  \item $R_g^*d_\Theta\psi = \rho(g)\inv d_\Theta\psi$.
\end{enumerate}
For the first condition, it suffices to check for  $\xi \in \g$ and
$\widehat{\xi}$ its corresponding vertical vector field.
We then note that $\iota_{\widehat{\xi}}(\psi^j) = 0$ for all $j$, since
$\psi \in \Omega_P^{k,G}(W)$. To compute $\iota_{\widehat{\xi}}(d\psi)$, we use
a useful lemma attributed to Cartan
%
\begin{lem*}[\ib{Cartan's Magic Formula}]
Let $\xi$ be a vector field and $\omega$ a $k$-form, and let $\L_\xi$ denote
the Lie derivative along $\xi$. Then
\[
\L_\xi\omega = d(\iota_\xi(\omega)) + \iota_\xi(d\omega)
\]
\end{lem*}
%
By the lemma, we have that
$\L_{\widehat{\xi}}\psi = d\iota_{\widehat{\xi}}(\psi) + \iota_\xi(d\psi)$.
By assumption, $d(\iota_{\widehat{\xi}}(\psi)) = d(0) = 0$, so
$\L_{\widehat{\xi}}\psi = \iota_{\widehat{\xi}}(d\psi)$.
The flow of $\xi$ is given by right multiplication $R_{\exp(t\xi)}$, so
\[
\L_{\widehat{\xi}}\psi = \frac{d}{dt}\bigg\vert_{t=0}R^*_{\exp(t\xi)}\psi
\]
Then since $\psi \in \Omega^{k,G}_P(W)$, we have that
$R_{\exp(t\xi)}^*\psi = \rho(g)\inv\psi$, and using this we compute
\begin{align*}
\L_{\widehat{\xi}}\psi &= \frac{d}{dt}\bigg\vert_{t=0}R^*_{\exp(t\xi)}\psi \\[5pt]
&= \frac{d}{dt}\bigg\vert_{t=0}\rho(\exp(t\xi))\inv\psi \\[5pt]
&= -\dt{\rho}(\xi)\psi
\end{align*}
So $\L_{\widehat{\xi}}\psi = -\dt{\rho}(\xi)\psi = \iota_\xi(d\psi)$. To
compute $\iota_{\widehat{\xi}}(\dt{\rho}(\Theta) \wedge \psi)$, we use another
helpful identity regarding interior multiplication and the wedge product.
%
\begin{lem*}
Let $\xi$ be a vector field, and let $\omega$ be a $k$-form and let $\eta$
be an $\ell$-form. Then
\[
\iota_\xi(\omega \wedge \eta) = \iota_\xi(\omega) \wedge \eta
+ (-1)^k\omega \wedge \iota_\xi(\eta)
\]
\end{lem*}
%
Fix a basis for $W$, so $\rho(\Theta)$ is a matrix of $1$-forms and $\psi$
is a vector of $k$-forms. The $i^{th}$ component of
$\dt{\rho}(\Theta) \wedge \psi$ is
\[
(\dt{\rho(\Theta)} \wedge \psi)^i =\rho(\Theta)^i_j \wedge \psi^j
\]
Then using our lemma, we compute
\begin{align*}
\iota_{\widehat{\xi}}((\dt{\rho}(\Theta) \wedge \psi)^i) &=
\iota_{\widehat{\xi}}(\dt{\rho}(\Theta)^i_j) \wedge \psi^j - \dt{\rho}(\Theta)^i_j
\wedge \iota_{\widehat{\xi}}(\psi^j) \\
&= \dt{\rho}(\Theta(\widehat{\xi}))^i_j\psi^j \\
&= \dt{\rho}(\xi)\psi
\end{align*}
Where we use the fact that $\Theta(\widehat{\xi}) = \xi$ and that
$\iota_{\widehat{\xi}}(\psi^j) = 0$ for all $j$ since $\iota_\xi(\psi) = 0$.
Therefore, we have that
\[
\iota_{\widehat{\xi}}(d_\Theta\psi) = \iota_{\widehat{\xi}}(d\psi) +
\iota_{\widehat{\xi}}(\dt{\rho}(\Theta) \wedge \psi) = -\dt{\rho}(\xi)\psi
+ \dt{\rho}(\xi)\psi = 0
\]
We now want to verify the second condition. By definition,
\[
R_g^*d_\Theta\psi = R_g^*d\psi + R_g^*(\dt{\rho}(\Theta) \wedge \psi)
\]
We compute the pullbacks on each term. Pullback commutes with $d$, so we
have that
\[
R_g^*d\psi = d(R^*_g\psi) = d(\rho(g)\inv\psi) = \rho(g)\inv d\psi
\]
For the other term, we fix a basis for $W$, and we compute
the $i^{th}$ component of $R_g^*(\dt{\rho}(\Theta) \wedge \psi)$ to be
\begin{align*}
R_g^*(\dt{\rho}(\Theta) \wedge \psi)^i
&= R^*_g(\dt{\rho}(\Theta)^i_j \wedge \psi^j) \\
&= \dt{\rho}(R_g^*\Theta)^i_j \wedge (R^*_g\psi)^j \\
&= \dt{\rho}(\Ad_{g\inv}\Theta)^i_j \wedge (\rho(g)\inv)^j_a\psi^a \\
&= (\rho(g)\inv)^i_k\dt{\rho}(\Theta)^k_\ell\rho(g)^\ell_j
\wedge (\rho(g)\inv)^j_a\psi^a \\
&= (\rho(g)\inv)^i_k\dt{\rho}(\Theta)^k_\ell\rho(g)^\ell_j(\rho(g)\inv)^j_a
\wedge \psi^a \\
&= (\rho(g)\inv)^i_k\dt{\rho}(\Theta)^k_a \wedge \psi^a \\
&= (\rho(g)\inv\dt{\rho}(\Theta))^i_a \wedge \psi^a \\
\end{align*}
Therefore, $R_g^*(\dt{\rho}(\Theta) \wedge \psi) =
\rho(g)\inv \dt{\rho}(\Theta) \wedge \psi$
\end{proof}
%
We are especially interested in the covariant derivative on sections
$\Omega^0_M(E)$, as $\nabla$ is best interpreted as a directional derivative
of a section $\psi$ in the direction of a tangent vector $\xi \in T_pM$.
%
\begin{defn}
Let $\pi : P \to M$, $\Theta \in \Omega^1_P(\g)$, $\rho : G \to GL(W)$,
$\dt{\rho} : \g \to \End W$ and $E = P \times_G W$ be as above. Then given a
section $\psi \in \Omega_M^0(E)$, and a vector $\xi \in T_xM$, define
the \ib{covariant derivative} of $\psi$ in the direction $\xi$ by
\[
\nabla\psi(\xi) = \frac{d}{dt}\bigg\vert_{t = 0} \tau_t\inv(\psi(\tilde{\gamma}(t)))
\]
where $\tilde{\gamma} : I \to E$ is the lift of a curve $\gamma :I \to M$
where $\gamma(0) = x$ and $\gamma'(0) = \xi$ and $\tau_t$ denotes the parallel
transport maps along $\gamma$.
\end{defn}
%
Note that $\nabla$ is an operator $\Omega_M^0(E) \to \Omega^1_M(E)$ --
we've already seen one operator with the same domain and codomain, the
exterior covariant derivative $d_\Theta$. As the name suggests, these
concepts agree.
%
\begin{prop}
The operator $\nabla$ is equal to $d_\Theta : \Omega_M^0(E) \to \Omega_M^1(E)$.
\end{prop}
%
\begin{proof} % TODO
We note that the formulas we gave for $\nabla$ and $d_\Theta$ use different
interpretations of sections of $E \to M$, so we need to translate one
operator into the language of the other. Let $\psi \in \Omega^0_M(E)$,
and $\tilde{\psi} \in \Omega^0_P(W)$ its corresponding $G$-equivariant map
$P \to W$. Let $\xi \in T_xM$ be a tangent vector, and $\gamma : I \to M$
a curve with $\gamma(0) = x$ and $\gamma'(0) = \xi$. Then let
$\tilde{\gamma}_p : I \to P$ denote the horizontal lift of $\gamma$ to the point
$p$ in the fiber $P_x$. The image $\psi(\gamma(t)) \in E_{\gamma(t)}$ determines
a $G$-equivariant map $P_{\gamma(t)} \to W$, where we map each element
$p \in P_{\gamma(t)}$ to the second component of its representative for
$\psi(\gamma(t))$, and this is exactly the restriction
$\tilde{\psi}\vert_{P_{\gamma(t)}}$. Under this identification, the
covariant derivative is given at the point $p \in P_x$ by

\[
\nabla\tilde{\psi}(\tilde{\xi})
= \frac{d}{dt}\bigg\vert_{t=0} \tilde{\psi}(\tilde{\gamma}_p(t))
\]
where $\tilde{\xi}$ denotes the horizontal lift of $\xi$ to $T_pP$.
We now verify that $\nabla$ and $d_\Theta$ agree.
\begin{align*}
\nabla\tilde{\psi}(\tilde{\xi})
&= \frac{d}{dt}\bigg\vert_{t=0} \tilde{\psi}(\tilde{\gamma}_p(t)) \\
&= d\tilde{\psi}(\tilde{\xi})
\end{align*}
We then note that since $\tilde{\xi}$ is horizontal,
$(\dt{\rho}(\Theta)\psi)(\tilde{\xi}) = 0$, so
\[
d_\Theta\tilde{\psi}(\tilde{\xi}) = d\tilde{\psi}(\tilde{\xi})
= \nabla\tilde{\psi}(\tilde{\xi})
\]
\end{proof}
%
%TODO? Curvature?
%TODO? relationship of connection with flatness - directional derivatives
%TODO? relationship of horizontal with acceleration - geodesics















\iffalse
Having defined a connection, we should check that such an object actually exists.
To show this, we first need a few lemmas.
%
\begin{defn}
Let
\[\begin{tikzcd}
0 \ar[r] & A \ar[r, "\varphi"] & B \ar[r, "\psi"] & C \ar[r] & 0
\end{tikzcd}\]
be a short exact sequence of vector spaces. A \ib{splitting} of this
exact sequence is a map $i : C \to B$ such that $\varphi \circ i = \id_C$.
If a splitting exists, we say that the short exact sequence splits.
\end{defn}
%
%
\begin{lem}[\ib{The splitting lemma}]
Let
\[\begin{tikzcd}
0 \ar[r] & A \ar[r, "\varphi"] & B \ar[r, "\psi"] & C \ar[r] & 0
\end{tikzcd}\]
be a short exact sequence of vector spaces. Then the following are equivalent:
\begin{enumerate}
  \item The short exact sequence splits.
  \item There is an isomorphism $\rho : B \to A \oplus C$ such that the diagram
  \[\begin{tikzcd}
  0 \ar[r] & A \ar[d, "\id_A"']\ar[r, "\varphi"] & B \ar[d, "\rho"] \ar[r, "\psi"]
  & C \ar[r] \ar[d, "\id_C"]& 0 \\
  0 \ar[r] & A \ar[r, hookrightarrow] & A \oplus C \ar[r] & C \ar[r] & 0
  \end{tikzcd}\]
  commutes, where the map $A \hookrightarrow A \oplus C$ is the inclusion
  $a \mapsto a + 0$, and the map $A \oplus C \to C$ is the mapping
  $a + c \mapsto c$.
  \item There exists a linear map $j : B \to A$ such that $j \circ \varphi = \id_A$.
\end{enumerate}
\end{lem}
%
\begin{proof}
We prove $(1) \implies (2) \implies (3) \implies (1)$. For $(1) \implies (2)$,
suppose we have a splitting $i : C \to B$. Since $i$ is injective and
$\psi \circ i = \id_C$, the image $i(C)$ must intersect $\ker\psi$ only
at $0$. Then since the sequence is exact, $\ker\psi = \varphi(A)$, so
$i(C) \cap \varphi(A) = 0$. Therefore, any element $b \in B$ can be written
uniquely as $a + c$ with $a \in \varphi(A)$ and $c \in i(C)$. Then define
$\rho : B \to A \oplus C$ by $\rho(b) = a + c$, where $a$ and $c$ are as above.\\

For $(2) \implies (3)$, define $j : B \to A$ by $\tilde{j} \circ \rho$, where
$\tilde{j} : A \oplus C \to A$ is the mapping $a + c \mapsto a$. \\

For $(3) \implies (1)$, Fix a basis $c_1, \ldots c_n$ for $c$. We know that
for each $c_i$ that $\psi\inv(c_i) = k_i + \varphi(A)$ for some $k_i \in B$.
Then define $i : C \to B$ by $c_i \mapsto k_i$.
\end{proof}
%
\begin{lem}
Every short exact sequence of vector spaces
\[\begin{tikzcd}
0 \ar[r] & A \ar[r, "\varphi"] & B \ar[r, "\psi"] & C \ar[r] & 0
\end{tikzcd}\]
splits.
\end{lem}
%
\begin{proof}
We want to define a map $i : C \to B$ such that $\psi \circ i = \id_C$. Let
$\set{c_1, \ldots, c_n}$ be a basis for $C$. Since the sequence is exact,
the map $\psi : B \to C$ is surjective, so for each $c_i$, we can pick an element
$b_i \in B$ such that $\psi(b_i) = c_i$. Then define $i(c_i) = b_i$ and
extend $i$ to all of $i$, giving the desired splitting.
\end{proof}
%
\begin{lem}
The space of splittings of a short exact sequence
\[\begin{tikzcd}
0 \ar[r] & A \ar[r, "\varphi"] & B \ar[r, "\psi"] & C \ar[r] & 0
\end{tikzcd}\]
is an affine space over $\hom(C,B)$,
i.e. the difference $i - j$ can be canonically identified with an element of
$\hom(C,A)$.
\end{lem}
%
\begin{proof} % Finish the proof that it is affine?
Let $i,j : C \to B$ be splittings of the exact sequence, and let
$c \in C$. Then since $i$ and $j$ are splittings,
\[
\psi((i-j)(c)) = \psi(i(c)) - \psi(j(c)) = c - c = 0
\]
Therefore, $(i-j)(c) \in \ker\psi$, so by exactness, there exists an $a \in A$
such that $\varphi(a) = (i-j)(c)$. By exactness, we know $\varphi$ is injective,
so this $a$ is unique. Therefore, the mapping $c \mapsto \varphi\inv((i-j)(c))$
defines the desired linear map $C \to A$.
\end{proof}
%
\begin{prop}
Given a fiber bundle $\pi : E \to M$ with model fiber $F$, a connection
$H \subset TE$ exists.
\end{prop}
%
\begin{proof}
It suffices to show that the short exact sequence of vector bundles
\[\begin{tikzcd}
0 \ar[r] & V \ar[r] & TE \ar[r] & \pi^*TM \ar[r] & 0
\end{tikzcd}\]
splits. Over any point $e \in E$, the space of splittings of
$0 \to V_e \to T_eE \to (\pi^*TM)_e$ is affine over the vector space
$\hom((\pi^*TM))_e \to V_e)$. Doing this fiberwise, we get a fiber bundle
$S \to E$ where the fiber over each $e \in E$ is the space of splittings
of the exact sequence, which can be seen by working in local trivializations.
Then let $\set{U_\alpha}$ be an open cover of $E$ equipped with local
trivializations $\varphi_\alpha$ of $S \to E$. The exact sequence
\[
0 \to V\vert_{\pi\inv(U_\alpha)} \to TE\vert_{\pi\inv(U_\alpha)} \to
\pi^*TM\vert_{\pi\inv(U_\alpha)}
\]
is modeled by the exact sequence $0 \to TF \to TU_\alpha \oplus TF \to TU_\alpha \to 0$,
which has a natural splitting given by the inclusion
$i_\alpha : TU_\alpha \hookrightarrow TU_\alpha \oplus TF$. The local trivialization
$\varphi_\alpha$ then allows us to transport this to a splitting over $U_\alpha$.
Then let $\set{\theta}$ be a partition of unity subordinate to $\set{U_\alpha}$.
Since the space of splittings is an affine space, it is closed under affine
combinations of splittings, so we can define a splitting
$i : \pi^*TM \to TE$ by $i = \sum_\alpha i_\alpha$.
\end{proof}
%TODO identification of vertical spaces with the Lie algebra.
%Discuss Lie algebra/exponential?
We are mostly concerned with connections on principal bundles, which have a
richer structure than connections on a general fiber bundle. Let $\pi : P \to M$
be a principal $G$-bundle, and let $\mathfrak{g}$ denote the Lie algebra of $G$.
Let $\exp : \g \to G$ denote the exponential map. Fix $x \in M$, a point
$p \in \pi\inv(x)$, and an element $X \in \g$. This determines a curve
$\gamma_X : I \to \pi\inv(x)$ with $\gamma_X(0) = p$ given by
\[
\gamma_X(t) = p \cdot \exp(tX)
\]
Since the action of $G$ preserves the fiber $\pi\inv(x)$, this curve lies
entirely in the fiber $\pi\inv(x)$, so the tangent vector $\dt{\gamma}_X$
at $t = 0$ is an element of the vertical space. In addition, since the
action of $G$ is free, the tangent vector $\dt{\gamma}_X = 0$ if and only if
$X = 0$, so the linear mapping $X \mapsto \dt{\gamma}_X$ is injective, and
consequently, an isomorphism $\g \to V_p$. Doing this on all points of $P$
then gives an isomorphism $\underline{\g} \to V$, where $\underline{\g}$ denotes
the trivial bundle $M \times \g$. Under this isomorphism, the exact
sequence of vector bundles becomes
\[\begin{tikzcd}
0 \ar[r] & \underline{\g} \ar[r] & TE \ar[r] & \pi^*TM \ar[r] & 0
\end{tikzcd}\]
%TODO Connection 1-form
By the splitting lemma, a connection is equivalent to a bundle homomorphism
$\theta : TE \to \underline{\g}$ such that the composition $\underline{\g} \to TE$
followed by $\theta$ is the identity map on $\underline{\g}$.
\fi
%
